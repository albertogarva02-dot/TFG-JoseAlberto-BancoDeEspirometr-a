#_____________________________________________________________________________________________________________________
#    Nombre del Script: igualar_valores.py
#    Autor: José Alberto García Valiño
#    Fecha: 07-12-2025
#    Descripción:
#        Script auxiliar matemático diseñado para la normalización de datos recibidos por espirometro Aira.
#        Contiene algoritmos para interpolar listas de diferentes longitudes, permitiendo
#        comparar o ajustar curvas experimentales con referencias medidas.
#______________________________________________________________________________________________________________________

__author__ = "José Alberto García Valiño"
__copyright__ = "Copyright 2025, José Alberto García Valiño"
__credits__ = ["José Alberto García Valiño"]
__license__ = "MIT"
__version__ = "1.0"
__email__ = "albertogarva02@gmail.com"
__status__ = "Beta"


import numpy as np

valores= [-8.030953482258377, -8.019368622040579, -44.509211861042694, -20.015169656129245, -16.69895685142985, -25.186611950099806, -33.31526695284691, -31.422545334784143, -31.490686469487635, -30.53827808897738, -31.493236476680018, -28.743428692190193, -30.53827808897738, -27.868415486875158, -28.892007456834218, -31.443145977255796, -33.24742540930538, -33.29268537046218, -31.480727120697534, -28.73200791690417, -25.04487839297574, -19.42135830762361, -18.980662402965912, -27.288212876592194, -30.24350191586179, -17.39983948594081, -28.93664407638975, -38.11676831901938, -32.80805164134713, -27.391875874281325, -24.60675850473168, -26.549114369416436, -21.857818511973, -18.833760280663935, -14.965217741529592, -18.833760280663935, -15.328170421384916, -15.207030408607945, -11.091358088797001, -7.604169621947669, -3.7683439956914446, -4.290470758020506, -2.1041664554789934, -5.953287428477328, -2.1041664554789934, -3.926479869529559, -1.7856068676404497, -4.45603681936009, -3.926479869529559, -0.03791456558535966, -2.772081315697727, -2.4331303357201506, -65.92693453659578, -50.24954593993492, -56.07093318006039, -67.07965080521087, -78.15922391912653, -74.96820214536437, -74.99489470623678, -67.07965080521087, -56.02431742321631, -55.97745614955073, -56.07093318006039, -47.69129960964807, -45.004467148473424, -47.69737567558172, -45.004467148473424, -47.69129960964807, -47.69737567558172, -47.69129960964807, -47.60813715618753, -47.5956579071751, -50.15702680870071, -52.76503438233859, -50.16988348675303, -52.76503438233859, -52.98518386315095, -52.951649480257835, -55.40396418263381, -55.41744823730822, -55.6377681584672, -55.631078155664966, -58.28865231550668, -58.095096558513994, -60.75738447013109, -65.2378536631187, -63.45561065041493, -67.9253674402509, -67.91917748594567, -66.1519156500504, -70.62977588946853, -68.84644364348829, -72.48948670429739, -79.63666455927141, -67.97816710028489, -54.34094513010556, -42.693031616650124, -28.778962060813374, -28.5927896979861, -42.62580775636374, -42.826264445511505, -42.75985330003925, -68.0288005897034, -68.0791021560307, -79.63666455927141, -67.9272052413006, -68.0791021560307, -42.693031616650124, -42.62580775636374, -42.826264445511505, -0.03791456558535966, -29.325652947096206, -0.03791456558535966, -28.96327893365331, -0.03791456558535966, -28.96327893365331, -0.03791456558535966, -1.7856068676404497, -0.03791456558535966, -1.477733802917819, -0.03791456558535966, -1.7856068676404497, -0.03791456558535966, -29.325652947096206, -0.03791456558535966, -4.45603681936009, -3.926479869529559, -0.03791456558535966, -2.772081315697727, -0.03791456558535966, -29.145565824694682, -0.03791456558535966, -29.325652947096206, -0.03791456558535966, -17.990706535430736, -8.030953482258377]

lista_referencia=[0.0, 0.19, 0.75, 1.23, 1.47, 1.71, 1.95, 2.19, 2.67, 2.91, 3.15, 3.39, 3.15, 3.39, 3.63, 3.39, 3.15, 3.39, 3.63, 3.39, 3.15, 3.39, 3.15, 3.39, 3.15, 3.39, 3.15, 3.39, 3.63, 3.39, 3.63, 3.39, 3.63, 3.39, 3.63, 3.39, 3.63, 3.39, 3.63, 3.39, 3.15, 3.39, 3.15, 3.39, 3.15, 2.91, 3.15, 2.91, 3.15, 2.91, 2.67, 2.91, 2.67, 2.43, 2.67, 2.43, 2.19, 2.43, 2.19, 1.95, 1.71, 1.47, 1.23, 1.47, 1.23, 0.99, 0.75, 0.99, 0.75, 0.51, 0.75, 0.51, 0.75, 0.51, 0.75, 0.51, 0.75, 0.51, 0.19, 0.51, 0.19, 0.51, 0.19, 0.51, 0.19, 0.51, 0.19, 0.51, 0.19, 0.51, 0.19, 0.0, 0.19, 0.0, 0.19, 0.0, 0.19, 0.0, 0.19, 0.0, 0.19, 0.0, 0.19, 0.0, 0.19, 0.0, 0.19, 0.0, 0.19, 0.0, 0.19, 0.0, 0.19, 0.0, 0.19, 0.0, 0.19, 0.0, -0.2, -0.78, -1.03, -1.27, -1.52, -1.27, -1.52, -1.27, -1.52, -1.77, -1.52, -1.27, -1.52, -1.27, -1.52, -1.27, -1.52, -1.27, -1.52, -1.27, -1.52, -1.27, -1.52, -1.27, -1.03, -1.27, -1.03, -1.27, -1.03, -1.27, -1.03, -1.27, -1.03, -1.27, -1.03, -1.27, -1.03, -1.27, -1.03, -1.27, -1.03, -1.27, -1.03, -1.27, -1.03, -1.27, -1.03, -1.27, -1.03, -0.78, -1.03, -0.78, -1.03, -0.78, -1.03, -0.78, -1.03, -0.78, -1.03, -0.78, -1.03, -0.78, -1.03, -0.78, -1.03, -0.78, -1.03, -0.78, -1.03, -0.78, -0.53, -0.78, -0.53, -0.78, -0.53, -0.78, -0.53, -0.78, -0.53, -0.78, -0.53, -0.78, -0.53, -0.78, -0.53, -0.2, -0.53, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, -0.2, 0.0, 0.19, 0.0, 0.19, 0.0]

def interpolar_lista(lista_ref, valor_objetivo):
    n = len(lista_ref)
    # Posiciones de lista_ref distribuidas proporcionalmente en la nueva longitud
    posiciones_ref = np.linspace(0, valor_objetivo - 1, n).astype(int)

    # Inicializamos la nueva lista
    lista_interpolada = np.zeros(valor_objetivo)

    # Recorremos los pares consecutivos de la lista_ref para interpolar valores
    for i in range(n - 1):
        inicio = posiciones_ref[i]
        fin = posiciones_ref[i + 1]
        val_inicio = lista_ref[i]
        val_fin = lista_ref[i + 1]
        # Interpolamos entre estos dos puntos
        lista_interpolada[inicio:fin + 1] = np.linspace(val_inicio, val_fin, fin - inicio + 1)

    return lista_interpolada.tolist()

valor_interpolado=interpolar_lista(valores, len(lista_referencia))
print("Longitud lista referencia: ",len(lista_referencia))
print("Longitud lista valores interpolados", len(valor_interpolado))
print(valor_interpolado)
def igualar_valores_con_listas(valor_inter, lista_ref):
  if len(valor_inter) != len(lista_ref):
    print("Error: Las listas deben tener la misma longitud.")
    return None

  resultado = {}
  for i in range(len(lista_ref)):
    resultado[lista_ref[i]] = valor_inter[i]
  return resultado

diccionario_igualado = igualar_valores_con_listas(valor_interpolado, lista_referencia)
print("Diccionario: ",diccionario_igualado)
print("Longitud diccionario: ",len(diccionario_igualado))

def obtener_clave_por_lista(diccionario, lista_objetivo):
    for clave, lista in diccionario.items():
        if lista == lista_objetivo:
            return clave
    return None  # Si no se encuentra

#clave=obtener_clave_por_lista(diccionario_igualado, data)
